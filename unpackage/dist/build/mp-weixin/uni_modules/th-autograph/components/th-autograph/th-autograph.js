(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/th-autograph/components/th-autograph/th-autograph"],{"1dbc":function(t,e,n){"use strict";var o=n("a13b"),i=n.n(o);i.a},"5d25":function(t,e,n){"use strict";(function(t){var o=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("7eb4")),a=o(n("ee10")),c={props:{canvasId:{type:String,default:"th-".concat(Date.now())},actionBar:{type:Array,default:function(){return["pencli","color","back","clear"]}},isDownload:{type:Boolean,default:!0},horizontalScreen:{type:Boolean,default:!1},fileName:{type:String,default:"签名"},delineColor:{type:String,default:"#000"},delineWidth:{type:Number,default:4}},data:function(){return{context:"",actionShow:!0,history:[],lineColor:"#000",lineWidth:4,canvasShow:!0,bottomHeight:0}},components:{thColor:function(){n.e("uni_modules/th-autograph/components/th-autograph/th-color").then(function(){return resolve(n("b989"))}.bind(null,n)).catch(n.oe)},thLine:function(){n.e("uni_modules/th-autograph/components/th-autograph/th-line").then(function(){return resolve(n("65bd"))}.bind(null,n)).catch(n.oe)}},mounted:function(){this.getIphoneBottom(),this.lineColor=this.delineColor,this.lineWidth=this.delineWidth;var e=t.createCanvasContext(this.canvasId,this);this.context=e},methods:{getIphoneBottom:function(){var e=this;t.getSystemInfo({success:function(t){var n=t.screenHeight-t.safeArea.bottom;e.bottomHeight=n>0?n-10:n}})},judge:function(t){return!!this.actionBar.includes(t)},openAction:function(t){this.canvasShow=!1,this.$refs[t].checkModel()},setColor:function(t){this.lineColor=t},setLine:function(t){this.lineWidth=t},checkAction:function(){this.actionShow=!this.actionShow},saveCanvas:function(){var e=this;return(0,a.default)(i.default.mark((function n(){var o;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.canvasToFilPath();case 2:if(o=n.sent,e.isDownload){n.next=6;break}return e.$emit("submit",o),n.abrupt("return",!1);case 6:return n.abrupt("return",new Promise((function(e,n){t.saveImageToPhotosAlbum({filePath:o,success:function(t){this.$emit("submit",o),e(t)},fail:function(t){this.$emit("dowmloadErr",t),n(t)}})})));case 7:case"end":return n.stop()}}),n)})))()},canvasToFilPath:function(){var e=this;return new Promise((function(n,o){t.canvasToTempFilePath({canvasId:e.canvasId,success:function(t){n(t.tempFilePath)},fail:function(t){o(t)}},e)}))},goBack:function(){var t=this;this.context.draw(),this.history.pop(),this.history.forEach((function(e,n){var o=e.style,i=o.color,a=o.width;if(t.context.beginPath(),t.context.setLineCap("round"),t.context.setStrokeStyle(i),t.context.setLineWidth(a),e.coordinates.length>=2)e.coordinates.forEach((function(e){"touchstart"==e.type?t.context.moveTo(e.x,e.y):t.context.lineTo(e.x,e.y)}));else{var c=e.coordinates[0];t.context.moveTo(c.x,c.y),t.context.lineTo(c.x+1,c.y)}t.context.stroke()})),this.context.draw(!0)},clear:function(){this.history=[],this.context.draw()},canvasStart:function(t){var e=t.touches[0],n=e.x,o=e.y;this.history.push({style:{color:this.lineColor,width:this.lineWidth},coordinates:[{type:t.type,x:n,y:o}]}),this.drawGraphics()},canvasMove:function(t){var e=t.touches[0],n=e.x,o=e.y;this.history[this.history.length-1].coordinates.push({type:t.type,x:n,y:o}),this.drawGraphics()},drawGraphics:function(){var t=this.history.length;if(t){var e=this.history[t-1],n=e.coordinates;if(n.length){var o,i;n.length<2?(o=n[n.length-1],i={x:o.x+1,y:o.y}):(o=n[n.length-2],i=n[n.length-1]);var a=e.style;this.context.beginPath(),this.context.setLineCap("round"),this.context.setStrokeStyle(a.color),this.context.setLineWidth(a.width),this.context.moveTo(o.x,o.y),this.context.lineTo(i.x,i.y),this.context.stroke(),this.context.draw(!0)}}}}};e.default=c}).call(this,n("df3c")["default"])},"80f5":function(t,e,n){"use strict";n.r(e);var o=n("5d25"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},"95d1":function(t,e,n){"use strict";n.r(e);var o=n("ed68"),i=n("80f5");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("1dbc");var c=n("828b"),r=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,"ed791e58",null,!1,o["a"],void 0);e["default"]=r.exports},a13b:function(t,e,n){},ed68:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.history.length),o=t.judge("pencli"),i=t.judge("color"),a=t.judge("back"),c=t.judge("clear"),r=t.actionBar.length;t._isMounted||(t.e0=function(e){t.canvasShow=!0},t.e1=function(e){t.canvasShow=!0}),t.$mp.data=Object.assign({},{$root:{g0:n,m0:o,m1:i,m2:a,m3:c,g1:r}})},i=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'uni_modules/th-autograph/components/th-autograph/th-autograph-create-component',
    {
        'uni_modules/th-autograph/components/th-autograph/th-autograph-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("95d1"))
        })
    },
    [['uni_modules/th-autograph/components/th-autograph/th-autograph-create-component']]
]);
